package com.sample.android;

import com.sample.download.HttpDownloader;

import android.app.Activity;

import android.app.AlertDialog;

import android.app.AlertDialog.Builder;

import android.content.DialogInterface;

import android.content.Intent;

import android.os.Bundle;

import android.view.View;

import android.widget.Button;


public class AndroidDetectActivity extends Activity {
    
  private TextView view_show;
    
final static String FeatureDir = "TXT/";
	
final static String Feature = "feature.txt";
   
 @Override    
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button  update=(Button)findViewById(R.id.btnupdate);        
        update.setOnClickListener(new Button.OnClickListener()
        {
        	public void onClick(View v)
        	{
        		String show;
        	   	HttpDownloader httpdownloader=new HttpDownloader();	
        	   	int result=0;
        		result=httpdownloader.download("http://10.0.2.2:8080/",FeatureDir,Feature);
        		if(result==1)
        		{
        			show="更新完成！";
        		}
        		else
        		{
        			show="更新失败！";
        		}
        		showDialog(show.toString().trim());
         	}
			});		
        
    	Button  test=(Button)findViewById(R.id.btntest);        
        test.setOnClickListener(new Button.OnClickListener()
        {
        	public void onClick(View v)
        	{ 
        		Intent intent=new Intent(AndroidDetectActivity.this,Test.class);
          		startActivity(intent);	
			}
      }      				
         );
     
    Button  out=(Button)findViewById(R.id.btnout);        
    out.setOnClickListener(new Button.OnClickListener()
    {
    	public void onClick(View v)
    	{
    		showAlterDialog();
    	}
    });
    }


		private void showAlterDialog() {
			// TODO Auto-generated method stub
			AlertDialog.Builder builder=new Builder(AndroidDetectActivity.this);
			builder.setMessage("确定退出吗？");
			builder.setTitle("提示");
			builder.setPositiveButton("确定", new DialogInterface.OnClickListener(){
				@Override
				public void onClick(DialogInterface dialog, int which) {
					// TODO Auto-generated method stub
					dialog.dismiss();
					AndroidDetectActivity.this.finish();
				}
    });
			builder.setNegativeButton("取消", new DialogInterface.OnClickListener(){
				@Override
				public void onClick(DialogInterface dialog, int which) {
					// TODO Auto-generated method stub
					dialog.dismiss();					
				}
    });
			builder.create().show();
    }
    private void showDialog(String show)
    { 
    	AlertDialog.Builder builder=new Builder(AndroidDetectActivity.this);
		builder.setMessage(show);
		builder.setTitle("Message");
		builder.setPositiveButton("确定", new DialogInterface.OnClickListener(){
			@Override
			public void onClick(DialogInterface dialog, int which) {
				// TODO Auto-generated method stub
				dialog.dismiss();
			}
        });
		builder.create().show();
    }
    
}

 